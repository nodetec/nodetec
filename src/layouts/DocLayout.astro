---
import Header from "../components/Header.astro";
import LeftSidebar from "../components/LeftSidebar.astro";
import RightSidebar from "../components/RightSidebar.astro";
import Footer from "../components/Footer.astro";
import Pagination from "../components/Pagination.astro";
import MainLayout from "./MainLayout.astro";
import type { ContentType } from "../content/config";

// type Props = CollectionEntry<ContentType>["data"] & {
//   headings: MarkdownHeading[];
//   next?: any;
//   prev?: any;
// };

const { headings, next, prev, ...data } = Astro.props;
const currentPage = Astro.url.pathname;
---

<MainLayout label={data.label}>
  <div class="flex flex-col">
    <div
      class="sticky top-0 z-40 w-full flex-none border-b border-slate-200 bg-slate-50/95 backdrop-blur transition-colors duration-500 dark:border-slate-700 dark:bg-slate-900/80"
    >
      <Header currentPage={currentPage} />
    </div>

    <div class="overflow-hidden 2xl:flex">
      <div class="max-w-8xl mx-auto px-4 sm:px-6 md:px-8">
        <aside
          class="fixed inset-0 left-[max(0px,calc(50%-45rem))] right-auto top-[3.8125rem] z-20 hidden w-[16.5rem] overflow-y-auto pb-10 lg:block"
        >
          <LeftSidebar currentPage={currentPage} />
        </aside>
        <div class="lg:pl-[16rem]">
          <div class="mx-auto max-w-none xl:ml-0 xl:mr-[15.5rem] xl:pr-16">
            <div
              class="flex flex-col items-center lg:border-l lg:border-slate-200 lg:pl-[3.5rem] lg:dark:border-slate-700"
            >
              <article
                class="dark:prose-dark prose prose-slate mb-16 min-h-[20rem] max-w-3xl pt-10 dark:prose-invert prose-h2:mt-[-5rem] prose-h2:pt-20 lg:mb-48 lg:min-w-[40rem] xl:mb-0"
              >
                <slot />
              </article>
              <Pagination next={next} prev={prev} />
              <Footer />
            </div>
            <aside
              class="fixed bottom-0 right-[max(0px,calc(50%-45rem))] top-[3.8125rem] z-20 hidden w-[19.5rem] overflow-y-auto py-10 xl:block"
            >
              <RightSidebar headings={headings} />
            </aside>
          </div>
        </div>
      </div>
    </div>
  </div>
</MainLayout>
